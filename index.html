<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>失业但坚强 · Tiny Wins</title>
<style>
:root{
  --bg:#e6f7fb;
  --card:#ffffff;
  --text:#083344;
  --muted:#5f9ea0;
  --accent:#38bdf8;
  --accent2:#34d399;
  --radius:14px;
}
body{margin:0;font-family:system-ui;background:var(--bg);color:var(--text);}
header{padding:20px;text-align:center;}
h1{margin:0;font-size:24px;}
.container{max-width:700px;margin:auto;padding:20px;}
.card{background:var(--card);padding:16px;border-radius:var(--radius);
      box-shadow:0 4px 12px rgba(0,0,0,.1);margin:16px 0;}
button{padding:6px 12px;border:none;border-radius:8px;background:var(--accent);color:#fff;cursor:pointer;margin:4px 4px 0 0;}
ul{padding-left:20px;}
</style>
</head>
<body>
<header>
  <h1>🌤️ 失业但坚强 · Tiny Wins</h1>
  <p>蓝绿色治愈风 · 本地保存版</p>
</header>

<div class="container">

  <div class="card">
    <h3>✅ 今日三件小事</h3>
    <ul id="tasks"></ul>
    <button onclick="addTask()">添加任务</button>
    <button onclick="clearTasks()">清空任务</button>
  </div>

  <div class="card">
    <h3>🌈 情绪天气</h3>
    <input type="range" min="0" max="100" value="50" id="mood">
    <span id="moodVal">🙂</span>
    <button onclick="resetMood()">重置心情</button>
  </div>

  <div class="card">
    <h3>💌 感恩三件事</h3>
    <textarea id="gratitude" style="width:100%;height:80px;"></textarea><br>
    <button onclick="resetGratitude()">清空感恩</button>
  </div>

</div>

<script>
function saveData(){
  const data = {
    tasks: Array.from(document.querySelectorAll('#tasks li')).map(li=>li.textContent),
    mood: document.getElementById('mood').value,
    gratitude: document.getElementById('gratitude').value
  };
  localStorage.setItem('tinywins', JSON.stringify(data));
}

function loadData(){
  const data = JSON.parse(localStorage.getItem('tinywins')||'{}');
  if(data.tasks){
    data.tasks.forEach(t=>{
      const li=document.createElement('li'); li.textContent=t;
      document.getElementById('tasks').appendChild(li);
    });
  }
  if(data.mood){
    document.getElementById('mood').value=data.mood;
    updateMoodEmoji(data.mood);
  }
  if(data.gratitude){
    document.getElementById('gratitude').value=data.gratitude;
  }
}

function addTask(){
  const text = prompt("输入一个小任务：");
  if(text){
    const li=document.createElement('li'); li.textContent=text;
    document.getElementById('tasks').appendChild(li);
    saveData();
  }
}

function clearTasks(){
  document.getElementById('tasks').innerHTML = "";
  saveData();
}

function resetMood(){
  document.getElementById('mood').value = 50;
  updateMoodEmoji(50);
  saveData();
}

function resetGratitude(){
  document.getElementById('gratitude').value = "";
  saveData();
}

function updateMoodEmoji(v){
  let e="🙂"; if(v>80) e="😎"; else if(v<30) e="🌧️";
  document.getElementById('moodVal').textContent=e;
}

document.getElementById('mood').oninput=function(){
  updateMoodEmoji(this.value);
  saveData();
};
document.getElementById('gratitude').oninput=saveData;

// 初始加载
loadData();
</script>
</body>
</html>
